{"version":3,"file":"static/js/141.0ec2f9c6.chunk.js","mappings":"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","sources":["../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/createClass.js","pages/well-game/robot.ts","../node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","pages/well-game/index.tsx"],"sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","type Line = [number, number, number];\ntype Lines = Line[];\ntype Steps = number[];\n\nconst allLines: Lines = [\n  [0, 1, 2],\n  [3, 4, 5],\n  [6, 7, 8],\n  [0, 3, 6],\n  [1, 4, 7],\n  [2, 5, 8],\n  [0, 4, 8],\n  [2, 4, 6],\n];\n\n/** 当将会和棋时，获取剩余的位置 */\nfunction findRest(steps: Steps) {\n  return [0, 1, 2, 3, 4, 5, 6, 7, 8].find((n) => !steps.includes(n));\n}\n\n/** 发现危险位置，并占领 */\nfunction findDanger(steps: Steps, lines: Lines) {\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    const rest = line.filter((p) => !steps.includes(p));\n    if (rest.length === 1) return rest[0];\n  }\n  return null;\n}\n\n/** 获取有可能赢的位置 */\nfunction findExpect(lines: Lines) {\n  return lines[0]?.[0];\n}\n\n/** 获取第一步 */\nfunction getFirst(step: number): [Steps, Lines, Lines] {\n  const myStep = step === 4 ? 0 : 4;\n  return [\n    [step, myStep],\n    allLines.filter((line) => !line.includes(myStep)),\n    allLines.filter((line) => !line.includes(step)),\n  ];\n}\n\nfunction getNext(\n  steps: Steps,\n  dangerLines: Lines,\n  expectedLines: Lines = dangerLines\n): [Steps, Lines, Lines] {\n  if (steps.length === 1) {\n    return getFirst(steps[0]);\n  }\n  const rivalSteps = steps.filter((_, i) => i % 2 === 0);\n  const restExpected = expectedLines.filter(\n    (line) => !line.includes(rivalSteps[rivalSteps.length - 1])\n  );\n\n  const winStep = findDanger(\n    steps.filter((_, i) => i % 2 === 1),\n    expectedLines\n  );\n\n  const myStep =\n    winStep !== null && !steps.includes(winStep)\n      ? winStep\n      : findDanger(rivalSteps, dangerLines) ??\n        findExpect(restExpected) ??\n        findRest(steps);\n  return [\n    [...steps, myStep],\n    dangerLines.filter((line) => !line.includes(myStep)),\n    restExpected,\n  ];\n}\n\nclass Robot {\n  steps: Steps = [];\n  dangerLines = allLines;\n  expectedLines = allLines;\n\n  next(step: number) {\n    const [steps, dangerLines, expectedLines] = getNext(\n      [...this.steps, step],\n      this.dangerLines,\n      this.expectedLines\n    );\n    this.steps = steps;\n    this.dangerLines = dangerLines;\n    this.expectedLines = expectedLines;\n    return steps[steps.length - 1];\n  }\n\n  restart() {\n    this.steps = [];\n    this.dangerLines = allLines;\n    this.expectedLines = allLines;\n  }\n}\n\nexport const robot = new Robot();\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import { memo, useMemo, useState } from \"react\";\nimport { robot } from \"./robot\";\n\ntype ISquare = \"X\" | \"O\" | null;\ntype Squares = ISquare[];\n\nexport default memo(() => {\n  const [steps, setSteps] = useState<number[]>([]);\n\n  const [currentSquares, winner] = useMemo(() => {\n    const current = Array(9).fill(null);\n    steps.forEach((step, i) => {\n      current[step] = i % 2 === 0 ? \"X\" : \"O\";\n    });\n    const winner = calculateWinner(current);\n    const len = steps.length;\n    if (!winner && len < 9 && len % 2 === 1) {\n      const robotStep = robot.next(steps[len - 1]);\n      setSteps([...steps, robotStep]);\n    }\n    return [current, winner];\n  }, [steps]);\n\n  const nextPlayer = steps.length % 2 === 0 ? \"X\" : \"O\";\n\n  return (\n    <div style={{ padding: 20 }}>\n      <button\n        onClick={() => {\n          robot.restart();\n          setSteps([]);\n        }}\n      >\n        restart\n      </button>\n      <div>\n        {winner\n          ? `the winner is ${winner}`\n          : steps.length === 9\n          ? \"stalemate\"\n          : `next player: ${nextPlayer}`}\n      </div>\n      <div className=\"well-game-board\">\n        {currentSquares.map((value, i) => (\n          <div\n            className=\"well-game-square\"\n            key={i}\n            onClick={() => {\n              if (winner || value) return;\n              setSteps([...steps, i]);\n            }}\n          >\n            {value}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n\nfunction calculateWinner(squares: Squares) {\n  const lines = [\n    [0, 1, 2],\n    [3, 4, 5],\n    [6, 7, 8],\n    [0, 3, 6],\n    [1, 4, 7],\n    [2, 5, 8],\n    [0, 4, 8],\n    [2, 4, 6],\n  ];\n  for (let i = 0; i < lines.length; i++) {\n    const [a, b, c] = lines[i];\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n      return squares[a];\n    }\n  }\n  return null;\n}\n"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","_typeof","obj","constructor","prototype","_toPropertyKey","arg","key","input","hint","prim","toPrimitive","undefined","res","call","String","Number","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","allLines","findDanger","steps","lines","rest","filter","p","includes","getNext","dangerLines","_ref","_findDanger","expectedLines","arguments","step","myStep","line","getFirst","rivalSteps","_","restExpected","winStep","_lines$","findExpect","find","n","findRest","concat","robot","Robot","instance","Constructor","_classCallCheck","protoProps","staticProps","value","_getNext","this","_getNext2","_slicedToArray","memo","_useState","useState","_useState2","setSteps","_useMemo","useMemo","current","fill","forEach","winner","squares","_lines$i","a","b","c","calculateWinner","len","robotStep","next","_useMemo2","currentSquares","nextPlayer","_jsxs","style","padding","children","_jsx","onClick","restart","className","map"],"sourceRoot":""}