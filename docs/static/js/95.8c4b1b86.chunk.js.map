{"version":3,"file":"static/js/95.8c4b1b86.chunk.js","mappings":"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","sources":["pages/fireworks/drawFirework.ts","utils/hex2rgb.ts","pages/fireworks/index.tsx"],"sourcesContent":["import { hex2rgb } from \"../../utils/hex2rgb\";\n\nconst colors = [\n  \"#ff0\",\n  \"#ff9912\",\n  \"#0ff\",\n  \"#0f0\",\n  \"#7cfc00\",\n  \"#f0f\",\n  \"#ff4500\",\n  \"#1e90ff\",\n  \"#fafff0\",\n];\n\nconst drawAmmo = (\n  ctx: CanvasRenderingContext2D,\n  point: Point,\n  color: string\n) => {\n  return new Promise<void>((resolve) => {\n    let distance = window.innerHeight - point[1];\n\n    const draw = () => {\n      if (distance <= 1) {\n        resolve();\n        return;\n      }\n      distance = distance * 0.9;\n\n      ctx.beginPath();\n      ctx.arc(point[0], point[1] + distance, 5, 0, 2 * Math.PI);\n      ctx.fillStyle = color;\n      ctx.fill();\n      ctx.closePath();\n\n      requestAnimationFrame(() => {\n        ctx.beginPath();\n        ctx.fillStyle = \"#000\";\n        ctx.arc(point[0], point[1] + distance, 6, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.closePath();\n        draw();\n      });\n    };\n\n    draw();\n  });\n};\n\nconst drawParticle = (\n  ctx: CanvasRenderingContext2D,\n  point: Point,\n  color: string,\n  angle: number,\n  speed: number\n) => {\n  const gra = 10, //重力加速度\n    existTime = 3, // 存在时间\n    particleSize = 2, //粒子大小\n    upSpeed = 10; // 初始的向上的速度\n\n  const speedX = speed * Math.cos(angle),\n    speedY = speed * Math.sin(angle) + upSpeed;\n\n  const draw = (t: number) => {\n    if (t > existTime) return;\n\n    const temp = [\n      point[0] + speedX * t,\n      point[1] + (gra * t * t) / 2 - speedY * t,\n    ];\n    ctx.beginPath();\n    ctx.arc(temp[0], temp[1], particleSize, 0, 2 * Math.PI);\n    const [r, g, b] = hex2rgb(color);\n    const a = existTime - t;\n    ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a > 1 ? 1 : a})`;\n    ctx.fill();\n    ctx.closePath();\n\n    requestAnimationFrame(() => {\n      ctx.beginPath();\n      ctx.arc(temp[0], temp[1], particleSize + 1, 0, 2 * Math.PI);\n      ctx.fillStyle = \"#000\";\n      ctx.fill();\n      ctx.closePath();\n      draw(t + 0.02);\n    });\n  };\n\n  draw(0);\n};\n\nconst drawBoom = (\n  ctx: CanvasRenderingContext2D,\n  point: Point,\n  color: string\n) => {\n  let speed = 60;\n\n  for (let i = 5; i < speed; i += 10) {\n    for (let j = ((i % 2) / 20) * Math.PI; j < 2 * Math.PI; j += Math.PI / 10) {\n      drawParticle(ctx, point, color, j, i);\n    }\n  }\n};\n\nexport const drawFirework = (ctx: CanvasRenderingContext2D, point: Point) => {\n  const color = colors[Math.round(Math.random() * (colors.length - 1))];\n  drawAmmo(ctx, point, color).then(() => drawBoom(ctx, point, color));\n};\n","export const hex2rgb = (hex: string): [number, number, number] => {\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n    let c = hex.substring(1).split(\"\");\n    if (c.length === 3) {\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\n    }\n    const v = Number(\"0x\" + c.join(\"\"));\n    return [(v >> 16) & 255, (v >> 8) & 255, v & 255];\n  }\n  throw new Error(\"Bad Hex\");\n};\n","import { memo, useEffect, useRef } from \"react\";\nimport { drawFirework } from \"./drawFirework\";\n\nexport default memo(() => {\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (ref.current) {\n      const ctx = ref.current.getContext(\"2d\");\n\n      const draw = (e: MouseEvent) => {\n        ctx && drawFirework(ctx, [e.clientX, e.clientY]);\n      }\n     \n      document.addEventListener('click', draw);\n\n      return () => document.removeEventListener('click', draw);\n    }\n  }, []);\n\n  return (\n    <canvas\n      ref={ref}\n      width={window.innerWidth}\n      height={window.innerHeight}\n      style={{ background: \"#000\", cursor: 'crosshair' }}\n    />\n  );\n});\n"],"names":["colors","drawParticle","ctx","point","color","angle","speed","speedX","Math","cos","speedY","sin","draw","t","temp","beginPath","arc","PI","_hex2rgb","hex","test","c","substring","split","length","v","Number","join","Error","hex2rgb","_hex2rgb2","_slicedToArray","r","g","b","a","fillStyle","concat","fill","closePath","requestAnimationFrame","particleSize","drawFirework","round","random","Promise","resolve","distance","window","innerHeight","drawAmmo","then","i","j","drawBoom","memo","ref","useRef","useEffect","current","getContext","e","clientX","clientY","document","addEventListener","removeEventListener","_jsx","width","innerWidth","height","style","background","cursor"],"sourceRoot":""}